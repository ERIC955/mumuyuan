import{_ as m,d as u,c as h,a as s,w as c,v as i,t as f,F as _,o as p,p as w,b}from"./index-ac_Ed_F9.js";const I={data(){return{userInfo:{email:"",password:"",copyPassword:"",newPassword:"",dbCheckPassword:"",name:"",phone:"",coupon:"",identity:"",point:0,id:0}}},created(){const n=u.getItem("id");this.$axios.get(`/users?id=${n}`).then(o=>{o.status===200&&(this.userInfo={...o.data[0],newPassword:"",dbCheckPassword:""})}).catch(o=>{console.log(o)})},computed:{checkEmpty(){return this.userInfo.name.trim()===""||this.userInfo.phone.trim()===""||this.userInfo.email.trim()===""},checkPasswordEmpty(){return!!(this.userInfo.newPassword.trim()!==this.userInfo.dbCheckPassword.trim()||this.userInfo.newPassword.trim()===""||this.userInfo.dbCheckPassword.trim()==="")}},methods:{setUserInfo(){const{name:n,phone:o,email:d}=this.userInfo;this.$axios.patch(`/users/${this.userInfo.id}`,{name:n,phone:o,email:d}).then(a=>{a.status===200&&this.$swal({icon:"success",title:"更新成功",text:"請確認更新資訊",timer:2e3})}).catch(()=>{this.$swal({icon:"error",title:"更新失敗",text:"請稍後再試",timer:2e3})})},setNewPassword(){this.$axios.patch(`/users/${this.userInfo.id}`,{password:this.userInfo.newPassword,copyPassword:this.userInfo.newPassword}).then(n=>{n.status===200&&this.$swal({icon:"success",title:"更新成功",text:"請確認更新資訊",timer:2e3}).then(()=>{this.userInfo.copyPassword=this.userInfo.newPassword,this.userInfo.newPassword="",this.userInfo.dbCheckPassword=""})}).catch(()=>{this.$swal({icon:"error",title:"更新失敗",text:"請稍後再試",timer:2e3})})}}},e=n=>(w("data-v-59c219cf"),n=n(),b(),n),y=e(()=>s("h3",{class:"text-center text-dark",style:{"font-weight":"600","letter-spacing":"2px"}},"會員中心",-1)),P=e(()=>s("hr",null,null,-1)),v={class:"row justify-content-center membercenter"},x={class:"col-10 col-md-8 mb-4"},k=e(()=>s("h5",{class:"text-primary fw-bolder",style:{"letter-spacing":"1px"}},"基本資料",-1)),g=e(()=>s("hr",null,null,-1)),C={class:"mb-3 row"},U=e(()=>s("label",{for:"name",class:"col-md-4 col-form-label"},"姓名：",-1)),S={class:"col-md-8"},V={class:"mb-3 row"},E=e(()=>s("label",{for:"phone",class:"col-md-4 col-form-label"},"手機：",-1)),N={class:"col-md-8"},j={class:"mb-3 row"},B=e(()=>s("label",{for:"email",class:"col-md-4 col-form-label"},"信箱：",-1)),q={class:"col-md-8"},D={class:"mb-3 row"},F=e(()=>s("label",{for:"email",class:"col-md-4 col-sm-3 col-4 col-form-label"},"會員點數：",-1)),M={class:"col-md-8 col-sm-9 col-8"},T={class:"mt-2"},z=e(()=>s("span",{class:"questionIcon ms-3 bi-question-circle-fill","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"每消費100元集一點，用於優惠券兌換。"},null,-1)),A={class:"buttonSave d-flex justify-content-center"},G=["disabled"],H={class:"col-10 col-md-8 mb-4"},J=e(()=>s("h5",{class:"text-primary fw-bolder",style:{"letter-spacing":"1px"}},"修改密碼",-1)),K=e(()=>s("hr",null,null,-1)),L={class:"mb-3 row"},O=e(()=>s("label",{for:"name",class:"col-md-4 col-form-label"},"目前密碼：",-1)),Q={class:"col-md-8"},R=["value"],W={class:"mb-3 row"},X=e(()=>s("label",{for:"phone",class:"col-md-4 col-form-label"},"新密碼：",-1)),Y={class:"col-md-8"},Z={class:"mb-3 row"},$=e(()=>s("label",{for:"name",class:"col-md-4 col-form-label"},"重新輸入新密碼：",-1)),ss={class:"col-md-8"},os={class:"buttonSave d-flex justify-content-center"},es=["disabled"];function ts(n,o,d,a,l,r){return p(),h(_,null,[y,P,s("div",v,[s("div",x,[k,g,s("div",C,[U,s("div",S,[c(s("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":o[0]||(o[0]=t=>l.userInfo.name=t)},null,512),[[i,l.userInfo.name]])])]),s("div",V,[E,s("div",N,[c(s("input",{type:"text",class:"form-control",id:"phone","onUpdate:modelValue":o[1]||(o[1]=t=>l.userInfo.phone=t),readonly:""},null,512),[[i,l.userInfo.phone]])])]),s("div",j,[B,s("div",q,[c(s("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":o[2]||(o[2]=t=>l.userInfo.email=t),readonly:""},null,512),[[i,l.userInfo.email]])])]),s("div",D,[F,s("div",M,[s("p",T,[s("span",null,f(l.userInfo.point),1),z])])]),s("div",A,[s("button",{class:"btn btn-primary",type:"button",onClick:o[3]||(o[3]=(...t)=>r.setUserInfo&&r.setUserInfo(...t)),disabled:r.checkEmpty},"儲存",8,G)])]),s("div",H,[J,K,s("div",L,[O,s("div",Q,[s("input",{type:"text",class:"m-0 form-control",value:l.userInfo.copyPassword,readonly:""},null,8,R)])]),s("div",W,[X,s("div",Y,[c(s("input",{type:"password",class:"form-control",id:"newPassword","onUpdate:modelValue":o[4]||(o[4]=t=>l.userInfo.newPassword=t)},null,512),[[i,l.userInfo.newPassword]])])]),s("div",Z,[$,s("div",ss,[c(s("input",{type:"password",class:"form-control",id:"rePassword","onUpdate:modelValue":o[5]||(o[5]=t=>l.userInfo.dbCheckPassword=t)},null,512),[[i,l.userInfo.dbCheckPassword]])])]),s("div",os,[s("button",{class:"btn btn-primary",type:"button",onClick:o[6]||(o[6]=(...t)=>r.setNewPassword&&r.setNewPassword(...t)),disabled:r.checkPasswordEmpty},"更改密碼",8,es)])])])],64)}const ns=m(I,[["render",ts],["__scopeId","data-v-59c219cf"]]);export{ns as default};
