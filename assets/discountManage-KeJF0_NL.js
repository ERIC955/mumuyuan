import{s as w}from"./selectList-ASKdOSw2.js";import{B as P}from"./BackendFunctions-eJ8K0Hdf.js";import{_ as F,k as f,o as l,c,a as t,s as r,l as p,m as C,F as v,t as b,v as h,w as m,e as u,r as x,g as B,T as L,p as D,b as I}from"./index-ac_Ed_F9.js";const j={components:{BackendFunctions:P,selectList:w},data(){return{discount:[],downDiscount:[],thisPage:[],thisPage2:[],page:1,pg:12,select:"1",options:[{value:"1",label:"優惠券管理"},{value:"2",label:"下架優惠券"}],options2:[{value:"2",label:"下架優惠券"},{value:"1",label:"優惠券管理"}],dataForm:{name:"",image:"",point:"1",calc:"",isLook:!1,description:""}}},computed:{startIndex(){return(this.page-1)*this.pg},endIndex(){return this.startIndex+this.pg}},methods:{prevPage(){this.page>1&&(this.page--,this.select==1?this.updateThisPage():this.select==2&&this.updatePage())},nextPage(){this.thisPage.length>=this.pg&&(this.page++,this.select==1?this.updateThisPage():this.select==2&&this.updatePage())},updateThisPage(){this.thisPage=this.discount.slice(this.startIndex,this.endIndex)},updatePage(){this.thisPage2=this.downDiscount.slice(this.startIndex,this.endIndex)},uploadFile(a){const s=a.target.files[0];this.dataForm.image=s},get(a){this.select=a},pushData(){this.$axios.post("/coupons",this.dataForm),location.reload()},goDown(a){const s={isLook:!0};this.$axios.patch(`/coupons/${a}`,s),location.reload()},goon(a){const s={isLook:!1};this.$axios.patch(`/coupons/${a}`,s),location.reload()},update(a,s){const g={point:`${s}`};this.$axios.patch(`/coupons/${a}`,g)},del(a){this.$axios.delete(`/coupons/${a}`),location.reload()}},created(){},mounted(){this.$axios.get("/coupons").then(a=>{a.data.forEach(s=>{s.isLook==!1?this.discount.push({title:s.name,point:s.point,id:s.id}):this.downDiscount.push({title:s.name,point:s.point,id:s.id}),this.updateThisPage(),this.updatePage()})})}},i=a=>(D("data-v-97341fc5"),a=a(),I(),a),U={class:"d-flex"},V={class:"sidebar border-5 pt-3 border-end d-flex bg-secondary flex-column"},T={key:0,class:"main"},M={class:"container mt-5"},N={class:"mt-3"},S={class:"row justify-content-between"},E=i(()=>t("div",{class:"col-2"},[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"新增優惠券")],-1)),q={class:"col-2"},z={class:"row row-cols-4 mt-2"},A={class:"card my-2 bg-light"},G={class:"cardbody"},H={class:"text-center mt-4"},J={class:"row px-3 justify-content-center align-items-center py-3"},K=i(()=>t("div",{class:"col-4 fs-4"},[t("label",{for:"money",class:"ms-3"},"點數:")],-1)),O={class:"col-6"},Q=["onUpdate:modelValue","placeholder"],R={class:"row text-center align-items-center py-3"},W={class:"col-6"},X=["data-bs-target"],Y={class:"col-6"},Z=["data-bs-target"],$=["id"],tt={class:"modal-dialog"},st={class:"modal-content border-0"},ot=i(()=>t("div",{class:"modal-body fs-3"}," 是否下架折價券? ",-1)),et={class:"modal-footer border-0"},at=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),dt=["onClick"],it=["id"],nt={class:"modal-dialog"},lt={class:"modal-content border-0"},ct={class:"modal-body fs-3"},rt={class:"modal-footer border-0"},bt=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),_t=["onClick"],ht={class:"d-flex justify-content-center h-25 mt-3"},mt=["disabled"],pt={class:"fs-3 text-primary mx-3"},ut=["disabled"],gt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},yt={class:"modal-dialog"},ft={class:"modal-content"},vt=i(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"折價券內容")],-1)),xt={class:"modal-body bg-secondary"},kt={class:"card border-0 bg-secondary"},wt={class:"cardbody mt-4"},Pt={class:"d-flex h-25 justify-content-center mt-3"},Ft={class:"d-flex h-25 justify-content-center mt-5 mb-2"},Ct=i(()=>t("label",{for:"title",class:"fs-3 me-2"},"券名:",-1)),Bt={class:"d-flex h-25 justify-content-center mb-2"},Lt=i(()=>t("label",{for:"point",class:"fs-3 me-2"},"點數:",-1)),Dt={class:"d-flex h-25 justify-content-center mb-2"},It=i(()=>t("label",{for:"money",class:"fs-3 me-2"},"折價金額:",-1)),jt={class:"d-flex h-25 justify-content-center mb-2"},Ut=i(()=>t("label",{for:"de",class:"fs-3 me-2"},"介紹:",-1)),Vt={class:"modal-footer"},Tt=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1)),Mt={key:1,class:"main"},Nt={class:"container mt-5"},St={class:"my-3"},Et={class:"row justify-content-end"},qt={class:"col-2"},zt={class:"row row-cols-4"},At={class:"card my-2 bg-light"},Gt={class:"cardbody"},Ht={class:"text-center mt-4"},Jt={class:"row px-3 text-center align-items-center py-1"},Kt=i(()=>t("div",{class:"col-6 fs-4"},[t("label",{for:"money",class:"ms-5"},"點數:")],-1)),Ot={class:"col-6 mt-2"},Qt={class:"me-6"},Rt={class:"row text-center align-items-center py-3"},Wt={class:"col-6"},Xt=["data-bs-target"],Yt={class:"col-6"},Zt=["data-bs-target"],$t=["id"],ts={class:"modal-dialog"},ss={class:"modal-content border-0"},os=i(()=>t("div",{class:"modal-body fs-3"}," 是否上架折價券? ",-1)),es={class:"modal-footer border-0"},as=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),ds=["onClick"],is=["id"],ns={class:"modal-dialog"},ls={class:"modal-content border-0"},cs=i(()=>t("div",{class:"modal-body fs-3"}," 是否刪除折價券? ",-1)),rs={class:"modal-footer border-0"},bs=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),_s=["onClick"],hs={class:"d-flex justify-content-center h-25 mt-3"},ms=["disabled"],ps={class:"fs-3 text-primary mx-3"},us=["disabled"];function gs(a,s,g,ys,e,d){const k=f("BackendFunctions"),y=f("select-list");return l(),c("div",U,[t("aside",V,[s[0]||(r(-1),s[0]=p(k),r(1),s[0])]),p(L,{name:"fade",mode:"out-in"},{default:C(()=>[e.select==1?(l(),c("main",T,[t("div",M,[t("div",N,[t("div",S,[E,t("div",q,[s[1]||(r(-1),s[1]=p(y,{options:e.options,onUpdata:d.get},null,8,["options","onUpdata"]),r(1),s[1])])])]),t("div",z,[(l(!0),c(v,null,x(e.thisPage,(o,n)=>(l(),c("div",{class:"col",key:n},[t("div",A,[t("div",G,[t("h4",H,b(o.title),1),t("div",J,[K,t("div",O,[m(t("input",{"onUpdate:modelValue":_=>o.point=_,type:"number",id:"money",class:"form-control shadow-none",placeholder:o.point},null,8,Q),[[h,o.point]])])]),t("div",R,[t("div",W,[t("button",{type:"button",class:"btn btn-danger ms-6","data-bs-toggle":"modal","data-bs-target":"#goDown"+n},"下架",8,X)]),t("div",Y,[t("button",{type:"button",class:"btn btn-primary me-6","data-bs-toggle":"modal","data-bs-target":"#update"+n},"修改",8,Z)])])])]),t("div",{class:"modal fade",id:"goDown"+n,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[u("0 "),t("div",tt,[t("div",st,[ot,t("div",et,[at,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:_=>d.goDown(o.id)},"確認",8,dt)])])])],8,$),t("div",{class:"modal fade",id:"update"+n,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[u("0 "),t("div",nt,[t("div",lt,[t("div",ct," 是否修改 "+b(o.title)+" 產品價錢? ",1),t("div",rt,[bt,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:_=>d.update(o.id,o.point)},"確認",8,_t)])])])],8,it)]))),128))]),t("div",ht,[t("button",{class:"btn btn-primary",onClick:s[2]||(s[2]=(...o)=>d.prevPage&&d.prevPage(...o)),disabled:e.page===1},"上一页",8,mt),t("strong",pt,b(e.page),1),t("button",{class:"btn btn-primary",onClick:s[3]||(s[3]=(...o)=>d.nextPage&&d.nextPage(...o)),disabled:e.thisPage.length<e.pg},"下一页",8,ut)]),t("div",gt,[t("div",yt,[t("div",ft,[vt,t("div",xt,[t("div",kt,[t("div",wt,[t("div",Pt,[t("input",{class:"form-control w-50",type:"file",id:"formFile",onChange:s[4]||(s[4]=(...o)=>d.uploadFile&&d.uploadFile(...o))},null,32)]),t("div",Ft,[Ct,m(t("input",{type:"text",id:"title",placeholder:"牛肉",class:"form-control border-1 shadow-none w-50","onUpdate:modelValue":s[5]||(s[5]=o=>e.dataForm.name=o)},null,512),[[h,e.dataForm.name]])]),t("div",Bt,[Lt,m(t("input",{type:"text",id:"point",placeholder:"100",class:"form-control border-1 shadow-none w-50","onUpdate:modelValue":s[6]||(s[6]=o=>e.dataForm.calc=o)},null,512),[[h,e.dataForm.calc]])]),t("div",Dt,[It,m(t("input",{type:"text",id:"money",placeholder:"100",class:"form-control border-1 shadow-none w-50","onUpdate:modelValue":s[7]||(s[7]=o=>e.dataForm.point=o)},null,512),[[h,e.dataForm.point]])]),t("div",jt,[Ut,m(t("input",{type:"text",id:"de",placeholder:"",class:"form-control border-1 shadow-none w-50","onUpdate:modelValue":s[8]||(s[8]=o=>e.dataForm.description=o)},null,512),[[h,e.dataForm.description]])])])])]),t("div",Vt,[Tt,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:s[9]||(s[9]=o=>d.pushData())},"新增")])])])])])])):e.select==2?(l(),c("main",Mt,[t("div",Nt,[t("div",St,[t("div",Et,[t("div",qt,[s[10]||(r(-1),s[10]=p(y,{options:e.options2,onUpdata:d.get},null,8,["options","onUpdata"]),r(1),s[10])])])]),t("div",zt,[(l(!0),c(v,null,x(e.thisPage2,(o,n)=>(l(),c("div",{class:"col",key:n},[t("div",At,[t("div",Gt,[t("h4",Ht,b(o.title),1),t("div",Jt,[Kt,t("div",Ot,[t("h4",Qt,b(o.point),1)])]),t("div",Rt,[t("div",Wt,[t("button",{type:"button",class:"btn btn-danger ms-6","data-bs-toggle":"modal","data-bs-target":"#goon"+n},"上架",8,Xt)]),t("div",Yt,[t("button",{type:"button",class:"btn btn-danger me-6","data-bs-toggle":"modal","data-bs-target":"#del"+n},"刪除",8,Zt)])])])]),t("div",{class:"modal fade",id:"goon"+n,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[u("0 "),t("div",ts,[t("div",ss,[os,t("div",es,[as,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:_=>d.goon(o.id)},"確認",8,ds)])])])],8,$t),t("div",{class:"modal fade",id:"del"+n,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[u("0 "),t("div",ns,[t("div",ls,[cs,t("div",rs,[bs,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:_=>d.del(o.id)},"確認",8,_s)])])])],8,is)]))),128))]),t("div",hs,[t("button",{class:"btn btn-primary",onClick:s[11]||(s[11]=(...o)=>d.prevPage&&d.prevPage(...o)),disabled:e.page===1},"上一页",8,ms),t("strong",ps,b(e.page),1),t("button",{class:"btn btn-primary",onClick:s[12]||(s[12]=(...o)=>d.nextPage&&d.nextPage(...o)),disabled:e.thisPage.length<e.pg},"下一页",8,us)])])])):B("",!0)]),_:1})])}const ks=F(j,[["render",gs],["__scopeId","data-v-97341fc5"]]);export{ks as default};
